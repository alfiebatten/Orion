<template>
  <div class = "svgContainer">
    <div class = "background">
      <svg class="gradientBackgroundTopology" version="1.1" viewbox="0 0 1200 580" xmlns="http://www.w3.org/2000/svg">
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 0; fill: rgb(101, 32, 96);" transform="translate(-1800, 60) scale(2.8, 2.8) skewX(30)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 1; fill: rgb(96, 47, 106);" transform="translate(-1650, 55) scale(2.65, 2.65) skewX(27.5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 2; fill: rgb(92, 63, 115);" transform="translate(-1500, 50) scale(2.5, 2.5) skewX(25)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 3; fill: rgb(87, 79, 124);" transform="translate(-1350, 45) scale(2.3499999999999996, 2.3499999999999996) skewX(22.5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 4; fill: rgb(83, 94, 133);" transform="translate(-1200, 40) scale(2.2, 2.2) skewX(20)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 5; fill: rgb(79, 110, 143);" transform="translate(-1050, 35) scale(2.05, 2.05) skewX(17.5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 6; fill: rgb(74, 126, 152);" transform="translate(-900, 30) scale(1.9, 1.9) skewX(15)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 7; fill: rgb(70, 141, 161);" transform="translate(-750, 25) scale(1.75, 1.75) skewX(12.5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 8; fill: rgb(65, 157, 170);" transform="translate(-600, 20) scale(1.6, 1.6) skewX(10)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 9; fill: rgb(61, 173, 180);" transform="translate(-450, 15) scale(1.45, 1.45) skewX(7.5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 10; fill: rgb(56, 188, 189);" transform="translate(-300, 10) scale(1.3, 1.3) skewX(5)"></path>
        <path d="M734.567 34.372c-28.692 61.724-23.266 100.422 16.275 116.094 59.313 23.508 200.347 32.911 259.299 83.906 58.95 50.994 238.697 11.572 269.438-75.95C1310.32 70.9 1365.669-64 1073.808-64c-194.576 0-307.654 32.79-339.24 98.372h-.001z" fill="#FFFA72" fill-rule="nonzero" style="position: relative; z-index: 11; fill: rgb(52, 204, 198);" transform="translate(-150, 5) scale(1.15, 1.15) skewX(2.5)"></path>
      </svg>
    </div>
  </div>
</template>

<script>
import animateElements from "animejs";
import { EventBus } from "../eventBus.js";

export default {
  name: "gradientBackgroundTopology",
  props: {
    delay: {
      type: Number,
      required: false,
      default: 50
    },
    initialTransformX: {
      type: String,
      required: false,
      default: "200px"
    },
    finalTransformX: {
      type: String,
      required: false,
      default: "-=20em"
    }
  },
  mounted: function() {
    EventBus.$on("initiateTopologyLoader", () => {
      this.LoadTopology();
    });
  },
  methods: {
    LoadTopology: function() {
      let svgElement = this.$el
        .getElementsByTagName("div")[0]
        .getElementsByTagName("svg")[0];
      let configData = {
        SVGpaths: svgElement.getElementsByTagName("path"),
        SVGprops: this._props
      };

      animateElements({
        targets: configData.SVGpaths,
        opacity: [0, 1],
        delay: function(_, currentKeyframe) {
          return currentKeyframe * configData.SVGprops.delay;
        },
        transformX: [
          configData.SVGprops.initialTransformX,
          configData.SVGprops.finalTransformX
        ],
        begin: () =>
          setTimeout(
            () => EventBus.$emit("showDeviceList"),
            configData.SVGpaths.length * 10
          )
      });
    }
  }
  //mounted:
};
</script>

<style scoped lang="stylus">
  .svgContainer
    height: 100%
    display: flex
    align-items: center

    .background
      align-self: flex-end
      right: 0
      position: absolute
      height: @height
      width: @height
      margin: @right

      svg
        height: @height
        width: @height
        position: @position
        right: @position

        path
          opacity: 0
</style>
